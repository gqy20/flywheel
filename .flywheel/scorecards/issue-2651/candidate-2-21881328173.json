{
  "issue_number": 2651,
  "candidate_number": 2,
  "run_id": "21881328173",
  "stage": "PLAN",
  "tdd_plan": {
    "files_to_create": [
      "tests/test_issue_2651_text_length_validation.py"
    ],
    "files_to_modify": [
      "src/flywheel/todo.py"
    ],
    "test_plan": {
      "failing_regression_tests": [
        "test_todo_from_dict_rejects_extremely_long_text_1mb",
        "test_todo_from_dict_rejects_text_exceeding_max_length",
        "test_todo_from_dict_accepts_text_within_max_length"
      ],
      "implementation_sequence": [
        "Add MAX_TODO_TEXT_LENGTH constant to todo.py",
        "Add length validation in Todo.from_dict after string type check",
        "Raise ValueError with clear message including max and actual length"
      ],
      "verification_commands": [
        "uv run pytest tests/test_issue_2651_text_length_validation.py -v",
        "uv run pytest tests/test_issue_2000_json_validation.py -v",
        "uv run ruff check src/flywheel/todo.py tests/test_issue_2651_text_length_validation.py"
      ]
    },
    "proposed_max_length": 1048576,
    "rationale": "1MB max text length prevents DoS via extremely long strings while being reasonable for legitimate use. Storage has 10MB file limit, so 1MB per todo allows ~10 todos max - aligns with defense-in-depth strategy."
  },
  "branch_name": "claude/issue-2651-candidate-2-21881328173",
  "created_at": "2026-02-10T20:57:00Z"
}
